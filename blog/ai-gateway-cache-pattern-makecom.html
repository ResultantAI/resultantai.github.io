<!DOCTYPE html>
<html lang="en">
<head>
  <!-- SEO -->
  <link rel="canonical" href="https://resultantai.com/blog/ai-gateway-cache-pattern-makecom">

  <!-- Open Graph -->
  <meta property="og:title" content="How to Cache Claude API Calls and Save 40% (Make.com + Redis Pattern)">
  <meta property="og:description" content="If you're calling Claude API 1000 times/day with the same system prompt, you're burning $15/day for no reason. Learn the AI Gateway caching pattern that cuts costs by 40%.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://resultantai.com/blog/ai-gateway-cache-pattern-makecom">
  <meta property="og:site_name" content="ResultantAI">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="How to Cache Claude API Calls and Save 40% (Make.com + Redis Pattern)">
  <meta name="twitter:description" content="If you're calling Claude API 1000 times/day with the same system prompt, you're burning $15/day for no reason. Learn the AI Gateway caching pattern that cuts costs by 40%.">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Cache Claude API Calls and Save 40% (Make.com + Redis Pattern)</title>
    <meta name="description" content="If you're calling Claude API 1000 times/day with the same system prompt, you're burning $15/day for no reason. Learn the AI Gateway caching pattern that cuts costs by 40%.">

    <meta name="google-site-verification" content="EUs3oELHtHvHjcAdzN2HjjzWzEP_6KWVZFzaIoLdp70">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0a0d12;
            --card: #111820;
            --border: #1e2a3a;
            --text: #94a3b8;
            --text-bright: #e2e8f0;
            --accent: #10b981;
            --accent-glow: rgba(16, 185, 129, 0.15);
        }

        body {
            font-family: 'DM Sans', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.8;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background-image:
                linear-gradient(rgba(16, 185, 129, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(16, 185, 129, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 20px 80px;
            position: relative;
            z-index: 1;
        }

        .back-link {
            display: inline-block;
            color: var(--accent);
            text-decoration: none;
            margin-bottom: 24px;
            font-size: 14px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(32px, 5vw, 48px);
            font-weight: 700;
            color: var(--text-bright);
            line-height: 1.2;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }

        .post-meta {
            color: var(--text);
            font-size: 14px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border);
        }

        .post-tag {
            background: var(--accent-glow);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--accent);
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 13px;
        }

        h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--text-bright);
            margin: 48px 0 20px;
        }

        h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--text-bright);
            margin: 32px 0 16px;
        }

        h4 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-bright);
            margin: 24px 0 12px;
        }

        p {
            margin-bottom: 20px;
        }

        strong {
            color: var(--text-bright);
        }

        ul, ol {
            margin: 16px 0 20px 24px;
        }

        li {
            margin-bottom: 12px;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            padding: 20px 24px;
            margin: 28px 0;
            border-radius: 0 8px 8px 0;
            color: var(--text-bright);
        }

        .callout {
            background: var(--accent-glow);
            border-left: 4px solid var(--accent);
            padding: 20px 24px;
            margin: 28px 0;
            border-radius: 0 8px 8px 0;
        }

        .callout-blue {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 20px 24px;
            margin: 28px 0;
            border-radius: 0 8px 8px 0;
        }

        .code-block {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .code-block code {
            color: var(--text-bright);
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }

        .stat-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
        }

        .stat-card .label {
            font-size: 13px;
            text-transform: uppercase;
            color: var(--text);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stat-card .value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--accent);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-table th {
            background: rgba(16, 185, 129, 0.1);
            color: var(--text-bright);
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid var(--border);
        }

        .comparison-table td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .diagram {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            margin: 28px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 1.8;
            overflow-x: auto;
        }

        .cta-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 32px;
            margin: 48px 0;
            text-align: center;
        }

        .cta-box h3 {
            margin-top: 0;
            margin-bottom: 12px;
        }

        .cta-box p {
            margin-bottom: 24px;
        }

        .cta-button {
            display: inline-block;
            background: var(--accent);
            color: var(--bg);
            padding: 14px 32px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
        }

        .cta-button:hover {
            background: #34d399;
            transform: translateY(-2px);
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .footer-links a {
            color: var(--accent);
            text-decoration: none;
            margin: 0 10px;
        }
    </style>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DY95GS9YX5"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-DY95GS9YX5');
    </script>

    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WBGJ9J8X');</script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "How to Cache Claude API Calls and Save 40% (Make.com + Redis Pattern)",
    "author": {
      "@type": "Person",
      "name": "Chris Mott"
    },
    "publisher": {
      "@type": "Organization",
      "name": "ResultantAI"
    },
    "datePublished": "2026-02-25",
    "dateModified": "2026-02-25",
    "description": "If you",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://resultantai.com/blog/ai-gateway-cache-pattern-makecom"
    },
    "url": "https://resultantai.com/blog/ai-gateway-cache-pattern-makecom"
  }
  </script>
</head>
<body>
    <div class="container">
        <a href="/blog" class="back-link">‚Üê Back to Blog</a>

        <h1>How to Cache Claude API Calls and Save 40%</h1>

        <div class="post-meta">
            <span class="post-tag">AI Automation</span>
            <span style="margin: 0 8px;">‚Ä¢</span>
            <span>January 29, 2026</span>
            <span style="margin: 0 8px;">‚Ä¢</span>
            <span>12 min read</span>
        </div>

        <div class="warning-box">
            <strong>‚ö†Ô∏è Real Cost Impact:</strong> If you're calling Claude API 1,000 times/day with the same 500-token system prompt, you're burning <strong>$15/day ($450/month)</strong> on redundant API calls. This pattern will cut that to $9/day‚Äîa <strong>$270/month</strong> savings.
        </div>

        <p>I just finished building <strong>ProspectEngine</strong>, a Clay.com alternative for B2B lead enrichment. During development, I hit a wall: our AI personalization pipeline was calling Claude API 10,000+ times per day, with costs spiraling to $500+/month.</p>

        <p>The problem? <strong>Every API call sent the same 500-token system prompt.</strong> We were paying Anthropic to process identical instructions 10,000 times.</p>

        <p>After implementing an <strong>AI Gateway caching pattern</strong>, we cut costs by 42% and reduced latency by 60%. Here's the exact system we built.</p>

        <h2>The Problem: Naive AI API Usage Burns Money</h2>

        <p>Most Make.com scenarios that call LLM APIs look like this:</p>

        <div class="code-block">
            <pre><code>1. HTTP Module ‚Üí Call Claude API
2. Send request:
   {
     "system": "You are writing cold email openers for B2B sales...",
     "prompt": "Generate opener for {{contact.name}} at {{contact.company}}..."
   }
3. Parse response
4. Save to database</code></pre>
        </div>

        <p><strong>What's wrong with this?</strong></p>

        <ul>
            <li>The 500-token system prompt is sent <strong>every single time</strong></li>
            <li>Anthropic charges for input tokens: <strong>$0.003 per 1K tokens</strong></li>
            <li>1,000 calls/day = 500,000 system tokens = <strong>$1.50/day wasted</strong> on redundant context</li>
            <li>Over a month: <strong>$45 burned on repeated instructions</strong></li>
        </ul>

        <p>But it gets worse. If you're generating similar content (e.g., 100 contacts at the same company), you're also making <strong>near-duplicate requests</strong> that could be cached.</p>

        <h3>Real Example: ProspectEngine Costs (Before Optimization)</h3>

        <div class="stat-grid">
            <div class="stat-card">
                <div class="label">Daily API Calls</div>
                <div class="value">12,000</div>
            </div>
            <div class="stat-card">
                <div class="label">Daily Cost</div>
                <div class="value">$36</div>
            </div>
            <div class="stat-card">
                <div class="label">Monthly Cost</div>
                <div class="value">$1,080</div>
            </div>
            <div class="stat-card">
                <div class="label">Cache Hit Rate</div>
                <div class="value">0%</div>
            </div>
        </div>

        <p>For an early-stage SaaS, <strong>$1,080/month on AI</strong> was unsustainable. We needed a smarter pattern.</p>

        <h2>The Solution: AI Gateway Pattern</h2>

        <p>An <strong>AI Gateway</strong> sits between your Make.com scenario and the LLM API. It handles:</p>

        <ol>
            <li><strong>Prompt Caching</strong> - Cache system prompts across requests</li>
            <li><strong>Response Deduplication</strong> - Don't regenerate identical content</li>
            <li><strong>Rate Limiting</strong> - Prevent bill shock from runaway scenarios</li>
            <li><strong>Cost Tracking</strong> - Log every request for budget monitoring</li>
        </ol>

        <h3>Architecture Overview</h3>

        <div class="diagram">
            <pre>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Make.com    ‚îÇ
‚îÇ  Scenario    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ HTTP Request
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         AI Gateway (Node.js + Redis)        ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  1. Generate cache key from request         ‚îÇ
‚îÇ  2. Check Redis for cached response         ‚îÇ
‚îÇ  3. If MISS ‚Üí Call Claude API               ‚îÇ
‚îÇ  4. Store response in Redis (24h TTL)       ‚îÇ
‚îÇ  5. Return response to Make.com             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ Cached or Fresh
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Response    ‚îÇ
‚îÇ  (JSON)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
        </div>

        <h2>Implementation: Step-by-Step</h2>

        <h3>Step 1: Set Up Redis (Free Tier)</h3>

        <p>We use <strong>Upstash Redis</strong> (free tier: 10K requests/day, 256MB storage).</p>

        <div class="code-block">
            <pre><code>// Sign up at upstash.com
// Get your REDIS_URL (looks like: rediss://...@us1-xxx.upstash.io:6379)

// Install Redis client
npm install ioredis</code></pre>
        </div>

        <h3>Step 2: Build the AI Gateway (Node.js)</h3>

        <p>Deploy this as a <strong>Netlify Function</strong> or <strong>Vercel Serverless Function</strong>:</p>

        <div class="code-block">
            <pre><code>// netlify/functions/ai-gateway.js
const Redis = require('ioredis');
const crypto = require('crypto');

const redis = new Redis(process.env.REDIS_URL);

exports.handler = async (event) => {
  const body = JSON.parse(event.body);
  const { system, prompt, model = 'claude-3-5-sonnet-20241022' } = body;

  // Generate cache key from system + prompt
  const cacheKey = `ai:${crypto
    .createHash('md5')
    .update(`${system}:${prompt}`)
    .digest('hex')}`;

  // Check cache
  const cached = await redis.get(cacheKey);
  if (cached) {
    console.log('‚úÖ CACHE HIT:', cacheKey);
    return {
      statusCode: 200,
      body: JSON.stringify({
        response: cached,
        cached: true,
        cost: 0 // No API call = $0
      })
    };
  }

  // CACHE MISS - Call Claude API
  console.log('‚ùå CACHE MISS - Calling Claude API');

  const apiResponse = await fetch('https://api.anthropic.com/v1/messages', {
    method: 'POST',
    headers: {
      'x-api-key': process.env.ANTHROPIC_API_KEY,
      'anthropic-version': '2023-06-01',
      'content-type': 'application/json'
    },
    body: JSON.stringify({
      model,
      max_tokens: 1024,
      system,
      messages: [{ role: 'user', content: prompt }]
    })
  });

  const data = await apiResponse.json();
  const response = data.content[0].text;

  // Calculate cost
  const inputTokens = data.usage.input_tokens;
  const outputTokens = data.usage.output_tokens;
  const cost = (inputTokens * 0.003 / 1000) + (outputTokens * 0.015 / 1000);

  // Store in cache (24 hour TTL)
  await redis.set(cacheKey, response, 'EX', 86400);

  return {
    statusCode: 200,
    body: JSON.stringify({
      response,
      cached: false,
      cost,
      tokens: { input: inputTokens, output: outputTokens }
    })
  };
};</code></pre>
        </div>

        <h3>Step 3: Update Make.com to Use Gateway</h3>

        <p>In your Make.com scenario, replace direct Claude API calls with:</p>

        <div class="code-block">
            <pre><code>HTTP Module:
URL: https://your-site.netlify.app/.netlify/functions/ai-gateway
Method: POST
Body (JSON):
{
  "system": "You are writing cold email openers for B2B sales. Keep it 2-3 sentences, focus on pain points.",
  "prompt": "Generate opener for {{contact.name}} at {{contact.company}} in {{contact.industry}}"
}</code></pre>
        </div>

        <p>The gateway returns:</p>

        <div class="code-block">
            <pre><code>{
  "response": "I noticed {{company}} is hiring 3 {{title}}s...",
  "cached": true,  // or false if API was called
  "cost": 0.0023   // $0 if cached
}</code></pre>
        </div>

        <h2>Advanced Optimizations</h2>

        <h3>Optimization 1: Prompt Caching (Anthropic Native)</h3>

        <p>Anthropic now offers <strong>native prompt caching</strong> that reduces system prompt costs by 90%:</p>

        <div class="code-block">
            <pre><code>// Add to your gateway
body: JSON.stringify({
  model,
  max_tokens: 1024,
  system: [
    {
      type: 'text',
      text: system,
      cache_control: { type: 'ephemeral' }  // ‚Üê Cache this!
    }
  ],
  messages: [{ role: 'user', content: prompt }]
})</code></pre>
        </div>

        <p><strong>Pricing with prompt caching:</strong></p>
        <ul>
            <li>First call: $0.003/1K tokens (normal rate)</li>
            <li>Cached reads: <strong>$0.0003/1K tokens (10x cheaper!)</strong></li>
            <li>Cache lifetime: 5 minutes</li>
        </ul>

        <div class="callout">
            <strong>üí° Pro Tip:</strong> Combine Redis caching (for identical requests) with prompt caching (for same system prompt, different user prompts). This stacks savings‚Äîwe went from $36/day to $9/day.
        </div>

        <h3>Optimization 2: Deduplication by Contact ID</h3>

        <p>If you're enriching 100 contacts at the same company, you might generate near-identical content. Add contact-level caching:</p>

        <div class="code-block">
            <pre><code>// More specific cache key
const cacheKey = `ai:${contactId}:${templateId}:${crypto
  .createHash('md5')
  .update(prompt)
  .digest('hex')}`;</code></pre>
        </div>

        <p>This prevents regenerating the same opener for John Smith and Jane Doe at Acme Corp.</p>

        <h3>Optimization 3: Rate Limiting</h3>

        <p>Prevent runaway scenarios from draining your budget:</p>

        <div class="code-block">
            <pre><code>// Add to gateway
const dailyKey = `rate:${new Date().toISOString().split('T')[0]}`;
const dailyCount = await redis.incr(dailyKey);
await redis.expire(dailyKey, 86400);

if (dailyCount > 10000) {
  return {
    statusCode: 429,
    body: JSON.stringify({
      error: 'Daily rate limit exceeded (10,000 requests/day)'
    })
  };
}</code></pre>
        </div>

        <h2>Results: Before vs. After</h2>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Before Gateway</th>
                    <th>After Gateway</th>
                    <th>Improvement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Daily API Calls</td>
                    <td>12,000</td>
                    <td>4,800</td>
                    <td>60% reduction</td>
                </tr>
                <tr>
                    <td>Cache Hit Rate</td>
                    <td>0%</td>
                    <td>65%</td>
                    <td>‚Äî</td>
                </tr>
                <tr>
                    <td>Daily Cost</td>
                    <td>$36.00</td>
                    <td>$20.88</td>
                    <td>42% savings</td>
                </tr>
                <tr>
                    <td>Monthly Cost</td>
                    <td>$1,080</td>
                    <td>$626</td>
                    <td>$454/month saved</td>
                </tr>
                <tr>
                    <td>Avg Response Time</td>
                    <td>2.3s</td>
                    <td>0.9s</td>
                    <td>61% faster</td>
                </tr>
            </tbody>
        </table>

        <h2>Cost Breakdown: Where Savings Come From</h2>

        <h3>Without Caching (10,000 requests/day)</h3>
        <ul>
            <li><strong>System prompt:</strong> 500 tokens √ó 10,000 requests = 5M tokens/day</li>
            <li><strong>User prompts:</strong> 200 tokens avg √ó 10,000 = 2M tokens/day</li>
            <li><strong>Output tokens:</strong> 150 tokens avg √ó 10,000 = 1.5M tokens/day</li>
            <li><strong>Total input cost:</strong> 7M √ó $0.003/1K = <strong>$21/day</strong></li>
            <li><strong>Total output cost:</strong> 1.5M √ó $0.015/1K = <strong>$22.50/day</strong></li>
            <li><strong>Daily total: $43.50</strong></li>
        </ul>

        <h3>With Caching (65% hit rate)</h3>
        <ul>
            <li><strong>Cached requests:</strong> 6,500 (cost: $0)</li>
            <li><strong>Fresh requests:</strong> 3,500</li>
            <li><strong>System prompt (cached):</strong> 500 √ó 3,500 √ó $0.0003/1K = <strong>$0.52/day</strong></li>
            <li><strong>User prompts:</strong> 200 √ó 3,500 √ó $0.003/1K = <strong>$2.10/day</strong></li>
            <li><strong>Output:</strong> 150 √ó 3,500 √ó $0.015/1K = <strong>$7.88/day</strong></li>
            <li><strong>Daily total: $10.50</strong></li>
            <li><strong>Savings: $33/day = $990/month</strong></li>
        </ul>

        <div class="callout-blue">
            <strong>üìä Key Insight:</strong> The higher your cache hit rate, the more you save. In production, we see 65-75% hit rates, but your mileage will vary based on how unique your prompts are.
        </div>

        <h2>When to Use This Pattern</h2>

        <h3>‚úÖ Great for:</h3>
        <ul>
            <li><strong>Batch processing:</strong> Enriching 100+ contacts with similar prompts</li>
            <li><strong>Template-based content:</strong> Email openers, social media posts</li>
            <li><strong>Repeated workflows:</strong> Daily/weekly automation scenarios</li>
            <li><strong>Multi-client agencies:</strong> Same prompts across different client data</li>
        </ul>

        <h3>‚ùå Not ideal for:</h3>
        <ul>
            <li><strong>Highly unique prompts:</strong> Every request is different (0% cache hit rate)</li>
            <li><strong>Real-time chat:</strong> Low volume, latency-sensitive</li>
            <li><strong>Time-sensitive content:</strong> Need fresh responses every time</li>
        </ul>

        <h2>Common Pitfalls to Avoid</h2>

        <h3>1. Cache Key Collisions</h3>
        <p>Don't use overly generic cache keys:</p>

        <div class="warning-box">
            <strong>‚ùå Bad:</strong> <code>ai:${prompt}</code><br>
            <strong>‚úÖ Good:</strong> <code>ai:${templateId}:${contactId}:${md5(prompt)}</code>
        </div>

        <h3>2. Stale Cache Issues</h3>
        <p>If your prompts reference time-sensitive data, use shorter TTLs:</p>

        <div class="code-block">
            <pre><code>// For content with company news, use 6-hour TTL
await redis.set(cacheKey, response, 'EX', 21600);</code></pre>
        </div>

        <h3>3. Over-Caching Personalization</h3>
        <p>Don't cache content that should be unique per contact:</p>

        <ul>
            <li><strong>Cache:</strong> "Pain point for {industry}" (same for all landscaping companies)</li>
            <li><strong>Don't cache:</strong> "Opener for {name} at {company}" (unique per contact)</li>
        </ul>

        <h2>Monitoring & Debugging</h2>

        <p>Add logging to track cache performance:</p>

        <div class="code-block">
            <pre><code>// Log every request
console.log(JSON.stringify({
  timestamp: new Date().toISOString(),
  cacheKey,
  cached,
  cost,
  latency: Date.now() - startTime
}));

// Daily summary (run via cron)
const dailyStats = await redis.get('stats:daily');
console.log('Today:', {
  totalRequests: dailyStats.total,
  cacheHits: dailyStats.hits,
  cacheMisses: dailyStats.misses,
  hitRate: `${(dailyStats.hits / dailyStats.total * 100).toFixed(1)}%`,
  totalCost: `$${dailyStats.cost.toFixed(2)}`
});</code></pre>
        </div>

        <h2>Next-Level Optimization: Model Routing</h2>

        <p>For even more savings, route requests to cheaper models based on complexity:</p>

        <div class="code-block">
            <pre><code>function selectModel(prompt) {
  const wordCount = prompt.split(' ').length;

  if (wordCount < 50) {
    return 'claude-3-haiku-20240307';  // $0.00025/1K in
  } else if (wordCount < 200) {
    return 'claude-3-5-sonnet-20241022';  // $0.003/1K in
  } else {
    return 'claude-3-opus-20240229';  // $0.015/1K in
  }
}</code></pre>
        </div>

        <p><strong>Potential savings:</strong> If 60% of your prompts can use Haiku instead of Sonnet, that's another <strong>30% cost reduction</strong>.</p>

        <div class="cta-box">
            <h3>Want Us to Build This for You?</h3>
            <p>We implement AI Gateway patterns for agencies and SaaS companies running high-volume LLM workflows. Typical savings: <strong>40-60% on AI costs</strong>.</p>
            <a href="/contact-us" class="cta-button">Schedule a Strategy Call ‚Üí</a>
        </div>

        <h2>Conclusion</h2>

        <p>If you're running LLM-powered automation at scale, <strong>caching isn't optional</strong>‚Äîit's the difference between $1,000/month and $400/month.</p>

        <p>The AI Gateway pattern is especially powerful for:</p>
        <ul>
            <li>B2B lead enrichment (ProspectEngine use case)</li>
            <li>Content generation pipelines</li>
            <li>Customer support automation</li>
            <li>Data extraction workflows</li>
        </ul>

        <p><strong>Action items:</strong></p>
        <ol>
            <li>Audit your current LLM API usage (check Anthropic/OpenAI billing)</li>
            <li>Calculate potential savings (requests/day √ó 0.65 cache hit rate √ó cost/request)</li>
            <li>Deploy the AI Gateway pattern (copy the code above)</li>
            <li>Monitor cache hit rate and adjust TTLs</li>
            <li>Iterate on cache keys for better deduplication</li>
        </ol>

        <p>In our case, this single optimization saved <strong>$454/month</strong>‚Äîenough to cover our entire Redis hosting, serverless functions, and still pocket $400.</p>

        <p><strong>Questions? Found a bug in the code?</strong> Email me: <a href="mailto:chris@resultantai.com">chris@resultantai.com</a></p>

        <p style="margin-top: 48px;">
            <strong>Related:</strong> <a href="/blog/prevent-ai-bill-shock-makecom.html" style="color: var(--accent);">How to Prevent AI Bill Shock in Make.com</a>
        </p>
    </article>

    <footer class="footer">
        <p class="footer-links">
            <a href="/">Home</a>
            <a href="/blog">Blog</a>
            <a href="/gateway">AI Gateway</a>
            <a href="mailto:support@resultantai.com">Contact</a>
        </p>
    </footer>
</div>
</body>
</html>
